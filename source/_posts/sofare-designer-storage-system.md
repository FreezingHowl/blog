---
title: 软件设计师-存储系统
category: 软件设计师
tags:
  - 软件设计师（中级）
  - 学习笔记
abbrlink: 3eed233b
date: 2023-04-19 21:10:28
---

<!--more-->

### 层次化存储体系

- 存储结构：CPU（寄存器【存储速率最快、容量最小、成本最高】） -> Cache（按内容存取） -> 内存（RAM、ROM） -> 外存（硬盘、光盘、U 盘【存储速率最慢、容量最大、成本最低】）
  - 局部性存储原理是层次化存储结构的支撑
    - 时间局部性：刚被访问的内容，立即又被访问
    - 空间局部性：刚被访问的内容，临近的空间很快被访问
- 存储结构分类：
  1. 按存储位置：
     - 内存
     - 外存
  2. 按存取方式
     - 按内容存取（Cache）
     - 按地址存取
       - 随机存取存储器（内存）
       - 顺序存取存储器（磁带）
       - 直接存取存储器（磁带）
  3. 按工作方式
     - 随机存取存储器 RAM（内存 DRAM）
     - 只读存储器 ROM（BIOS）

### Cache

- 概念：
  - 在计算机存储系统体系中，Cache 的访问速度最快的层次（在没有寄存器的情况下）
  - 使用 Cache 改善系统性能的依据是程序的局部性原理（时间局部性和空间局部性）
- Cache 的访问命中率
  > 如果以 h 代表对 Cache 的访问命中率，t1 表示 Cache 的周期时间，t2 表示主存储器周期时间,以读操作为例，使用”Cache + 主存储器“的系统的平均周期为 t3，则:
  > t3 = h*t1 + (1 - h)*t2
  > 其中,(1 - h)又称为失效率（未命中率）。
- 映像
  - 概念：地址映像是将主存与 Cache 的存储空间划分为若干大小相同的页（或称为块）
  - 分类：
    - 直接相联映像：硬件电路较简单，但冲突率很高
    - 全相联映像：电路难于设计和实现，只适用于小容量的 Cache，C 冲突率较低
    - 组相联映像：直接相联映像与全相联映像的折中
  - 比较：
    | | 冲突率（高、中、低） | 电路复杂度（复杂、简单、折中） |
    | :--: | :-------: | :-------: |
    | 直接相联映像 | 高 | 简单 |
    | 全相联映像 | 低 | 复杂 |
    | 组相联映像 | 中 | 折中 |
  - 注意：主存与 Cache 之间的地址映射由硬件直接完成

### 主存编址计算

- 概念：
  - 字和字长：计算机在存储、传送或操作时，作为一个单元的一组二进制码称为字，一个字中的二进制位的位数称为字长
  - 1B（字节） = 8bit
- 计算相关：
  - 存储单元个数 = 最大地址 - 最小地址 + 1
  - 编制内容：
    - 按字编址：存储体的存储单元是字存储单元，即最小寻址单位是一个字（1bit）
    - 按字节编址：存储体的存储单元是字节存储单元，即最小寻址单位是一个字节（1B）
  - 总容量 = 存储单元个数 \* 编址内容
  - 根据存储器所要求的容量和选定的存储芯片的容量，就可以计算出所需芯片的总数
    > 总片数 = 总容量 / 每片的容量
